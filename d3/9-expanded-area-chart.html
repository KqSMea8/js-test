<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="https://d3js.org/d3.v3.min.js"></script>
    <link rel="stylesheet" href="./d3-cookbook/css/styles.css">
</head>
<body>
<script>
    function expandedAreaChart() {
      var _chart = {};

      var _width = 900, _height = 450,
        _margins = {top: 30, left: 30, right: 30, bottom: 30},
        _x, _y,
        _data = [],
        _colors = d3.scale.category10(),
        _svg,
        _bodyG,
        _line;

      _chart.render = function () {
        if(!_svg) {
          _svg = d3.select('body').append('svg')
            .attr('height', _height)
            .attr('width', _width);

          renderAxes(_svg);

          defineBodyClip(_svg);
        }

        renderBody(_svg);
      }

      function renderAxes(svg) {
        var axesG = svg.append('g')
          .attr('class', 'axes');

        renderXAxis(axesG);

        renderYAxis(axesG);
      }

      function renderXAxis(axesG) {
        var xAxis = d3.svg.axis()
          .scale(_x.range([0, quadrantWidth()]))
          .orient('bottom');

        axesG.append('g')
          .attr('class', 'x axis')
          .attr('transform', function () {
            return 'translate(' + xStart() + ',' + yStart() + ')';
          })
          .call(xAxis);

        d3.selectAll('g.x g.tick')
          .append('line')
          .classed('grid-line', true)
          .attr('x1', 0)
          .attr('y1', 0)
          .attr('x2', 0)
          .attr('y2', -quadrantHeight());
      }

      function renderYAxis(axesG) {
        var yAxis = d3.svg.axis()
          .scale(_y.range([quadrantHeight(), 0]))
          .orient('left');

        axesG.append('g')
          .attr('class', 'y axis')
          .attr('transform', function () {
            return 'translate(' + xStart() + ',' + yEnd() + ')';
          })
          .call(yAxis);

        d3.selectAll('g.y g.tick')
          .append('line')
          .classed('grid-line', true)
          .attr('x1', 0)
          .attr('y1', 0)
          .attr('x2', quadrantWidth())
          .attr('y2', 0);
      }

      function defineBodyClip(svg) {
        var padding = 5;

        svg.append('defs')
          .append('clipPath')
          .attr('id', 'body-clip')
          .append('rect')
          .attr('x', 0 - padding)
          .attr('y', 0)
          .attr('width', quadrantWidth() + 2 * padding)
          .attr('height', quadrantHeight());
      }

      function renderBody(svg) {
        if(!_bodyG)
          _bodyG = svg.append('g')
            .attr('class', 'body')
            .attr('transform', 'translate('
                + xStart() + ','
                + yEnd() + ')'
            )
            .attr('clip-path', 'url(#body-clip)');

        var stack = d3.layout.stack()
          .offset('expand');

        stack(_data);

        renderLines(_data);

        renderAreas(_data);

      }


    }




</script>
</body>
</html>